@model CC.WebApp.ViewModels.Profile.ProfileViewModel
@{
    ViewData["Title"] = "CC - Profile";
}

<div class="temlate-head-area">
    <div class="template-head-text">
        <p>
            The My Tools page contains information about tools you currently have rented.<br/>
            You can also see your rental history information.
        </p>
    </div>
    <div class="template-main-header">
        <p>My Tools</p>
    </div>
</div>

<div class="welcome-part">
    <span>Welcome</span>
    @{
        if (!string.IsNullOrEmpty(User.Identity.Name))
        {
            <h4>@User.Identity.Name</h4>
        }
        else
        {
            <h4>Email address</h4>
        }
    }
</div>

@if (User.Identity.IsAuthenticated)
{
    if (Model.Email == "aleksstodo@gmail.com")
    {
        <div class="admin-part">
            <a asp-action="AddTool" asp-controller="Admin" class="admin-add-buttons">Add Tool</a>
            <a asp-action="AddEmployee" asp-controller="Admin" class="admin-add-buttons">Add Employee</a>
        </div>
    }
}

<div  class="template-sec-header">
    <p>Currently rented tools</p>
</div>      

<div class="list-group">
    @if (Model.CurrentRentals != null && Model.CurrentRentals.Count() != 0)
    {
        @foreach (var data in Model.CurrentRentals)
        {
            <a href="#" class="list-group-item list-group-item-action" aria-current="true">
            <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">@data.Tool.Name</h5>
                <small class="error-text-small">@string.Format("{0} {1} {2}", "Ends in", Math.Round((data.RentEnd - DateTime.Now).TotalDays), "days")</small>
            </div>
                <p class="mb-1"><span class="semibold-style">Barcode:</span> @data.Tool.Barcode.ToString()</p>
                <small>@string.Format("{0} {1} {2} {3}", "Rented from", data.RentStart.ToShortDateString(), "until", data.RentEnd.ToShortDateString())</small>
            </a>
        }
    }
    else
    {
        <a href="#" class="list-group-item list-group-item-action" aria-current="true">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">You are not renting any tools currently.</h5>
            <small></small>
        </div>
            <p class="mb-1"></p>
        <small></small>
        </a>
    }
</div>

<div  class="template-sec-header">
    <p>Rental history</p>
</div>      

<div class="list-group rental-history-group">
    @if (Model.RentHistory != null && Model.RentHistory.Count() != 0)
    {
        @foreach (var data in Model.RentHistory)
        {
            <a href="#" class="list-group-item list-group-item-action" aria-current="true">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">@data.Tool.Name</h5>
                    <small class="error-text-small"></small>
                </div>
                <p class="mb-1"><span class="semibold-style">Barcode:</span> @data.Tool.Barcode.ToString()</p>
                <small>@string.Format("{0} {1} {2} {3}", "Rented from", data.RentStart.ToShortDateString(), "until", data.RentEnd.ToShortDateString())</small>
            </a>
        }
    }
    else
    {
        <a href="#" class="list-group-item list-group-item-action" aria-current="true">
            <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">You have not yet rented any tools.</h5>
                <small></small>
            </div>
            <p class="mb-1"></p>
            <small></small>
        </a>
    }
</div>